# 用户接口

## 用户程序的步骤以及每个步骤之间的关系

(1)编辑：建立一个新文件，或对已有的文件中的错误进行修改。

(2) 编译：将源程序翻译成浮动的目标代码。 

(3)连接：主程序和其他所需要的子程序和例行程序连接装配在一起，使之成为一个可执行的、完整的主存映像文件。

(4) 运行：将主存映像文件调入主存，启动运行，得出计算结果

![](/os2-8.png)

## 静态连接和动态链接的区别

### 静态连接

一个源程序经编译后，生成一个可重定位的目标模块，并产生内部符号表和外部符号表，供连接程序 (Link)使用

+ 内部符号表，本模块可以被其他程序调用的入口点。
+ 外部调用表，本模块要调用的外部的程序模块名
+ 连接需要做的工作
   + 将各模块连接成为一个整体；
   + 构造全程符号表，在其中填写模块的逻辑地址；
   + 查找各程序段的外部调用表，填入对应调用函数的地址

**静态连接的缺点**

静态连接将所需的外部函数链接到目标文件中形成为一个可执行文件。若多个应用程序都调用了同一个库中的外部函数，那么，多个应用程序的目标文件中都会包含这个外部函数对应的代码。

### 动态连接

动态连接不需要将外部函数链接到目标文件中。而是在应用程序中需要调用外部函数的地方作记录，并说明要使用的外部函数名和引用入口号

+ 形成函数调用链表
+ 需支持 —— DLL (动态链接库)


## 操作系统提供的两个接口和接口使用的场合

::: tip | 操作系统的用户界面
操作系统的用户界面 (或称接口) 是操作系统提供给用户与计算机打交道的外部机制。用户借助这种机制来使用和控制计算机系统
:::

### 操作界面 (命令接口) 

不同的操作系统提供不同的操作命令界面，它包括键盘命令、图形界面以及批处理界面

### 系统功能服务界面 (程序接口)

常被称作系统调用接口或系统调用函数，是每个操作系统都必须提供的系统服务功能，用户能够在源程序中使用它来请求系统服务


## 举例说明实际操作系统的用户界面

不同的操作系统针对自身的特点提供不同的用户界面：

+ 分时系统必须提供键盘命令和系统调用界面
+ 批处理系统则必须提供批处理控制语言和系统调用界面。
+ 任何操作系统都必须提供系统调用界面

## 系统功能调用的概念及实现方法

系统功能调用是用户在程序一级请求操作系统服务的一种手段，它是带有一定功能号的“访管指令”。其功能是由操作系统中的程序完成的，即由软件方法实现的

+ 系统功能调用：是OS提供给编程人员的唯一接口
+ 系统功能调用是由操作系统中的一段程序来完成特定功能的（如打印、读写盘等），属于一种特殊的过程调用。
+ 调用的方式：采用访管方式来实现。通过产生一个访管中断，使处理机由目态（用户态）转为管态（系统态）

不同的操作系统，系统调用实现的具体方法有所不同，但其特点是相同的：

1. 每个系统调用对应一个系统调用号；
2. 每个系统调用有一个对应的执行程序段；
3. 每个系统调用要求一定数量的输入参数和返回值；
4. 整个系统有一个系统调用执行程序入口地址表

![](/os2-1.jpg)


